# Maintainer: cpasjuste <cpasjuste@gmail.com>

pkgname=ps4-openorbis-headers
pkgver=0.5.2
pkgrel=1
pkgdesc='headers for ps4 (include crtlib...)'
arch=('any')
url='https://github.com/OpenOrbis/OpenOrbis-PS4-Toolchain'
license=('GNU GPL')
options=(!strip libtool)
source=("https://github.com/OpenOrbis/OpenOrbis-PS4-Toolchain/archive/refs/tags/v$pkgver.tar.gz")
sha256sums=('76e047cae60729b4471aff69a45191794fe2e09165ef8ed712e5e706bf33fee2')
depends=('ps4-openorbis-clang')
groups=('ps4-openorbis')

build() {
  cd OpenOrbis-PS4-Toolchain-$pkgver/src/crt
  /opt/pacbrew/ps4/openorbis/bin/clang -c -o crtlib.o crtlib.c
}

package() {
  install -d "${pkgdir}"/opt/pacbrew/ps4/openorbis/lib
  install -m755 OpenOrbis-PS4-Toolchain-$pkgver/src/crt/crtlib.o ${pkgdir}/opt/pacbrew/ps4/openorbis/lib
  install -m755 OpenOrbis-PS4-Toolchain-$pkgver/link.x ${pkgdir}/opt/pacbrew/ps4/openorbis
  cp -r OpenOrbis-PS4-Toolchain-$pkgver/include ${pkgdir}/opt/pacbrew/ps4/openorbis
  cp -r OpenOrbis-PS4-Toolchain-$pkgver/samples ${pkgdir}/opt/pacbrew/ps4/openorbis
}
